/*============================================================================*/
/*
 * @file    camera.h
 * @brief   カメラ
 * @note    カメラ
 * @date    2023/12/08
 */
/*============================================================================*/

#ifndef __CAMERA_H
#define __CAMERA_H

/*============================================================================*/
/* include */
/*============================================================================*/
#include <stdio.h>

/*============================================================================*/
/* define */
/*============================================================================*/
#define DEF_TIMER_KIND_CAMERA (4)						//timer id
#define DEF_MONIT_CYCLE_CAMERA (20)                    //monitor period
#define DEF_IMG_HEIGHT (2160)
#define DEF_IMG_WIDTH (3840)
#define DEF_BUFF_SIZE (10)
#define DEF_WAIT_SECOND (60)

/*============================================================================*/
/* enum */
/*============================================================================*/

/*============================================================================*/
/* typedef */
/*============================================================================*/
struct buffer{
    void *start;
    size_t length;
};

typedef struct _cameraInfo{
    char        dev_name[64];
	size_t      camera_num;
    __uint32_t  img_height;
    __uint32_t  img_width;
    size_t      buffer_size;
    int         shm_id;
    int         fd;
    int         finish;
    int         can_get;
    struct buffer buffers[DEF_BUFF_SIZE];
    int         period;
    int         timeout;
} cameraInfo;

typedef struct _cameraStat{
	int Stat;                                           /* 0:通信正常，1:通信異常 */
	unsigned long long timestamp;                       /* タイムスタンプ */
    char img_data[DEF_IMG_HEIGHT * DEF_IMG_WIDTH * 2];  /* 画像データ */
} cameraStat;

/*============================================================================*/
/* struct */
/*============================================================================*/

/*============================================================================*/
/* func */
/*============================================================================*/

/*============================================================================*/
/* extern(val) */
/*============================================================================*/

/*============================================================================*/
/* extern(func) */
/*============================================================================*/
extern void* CameraMain(void* arg);

/*============================================================================*/
/* Macro */
/*============================================================================*/

#endif	/* __CAMERA_H */
